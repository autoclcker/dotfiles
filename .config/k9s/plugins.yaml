plugins:
  apply-manifest:
    shortCut: Shift-E
    confirm: false
    background: false
    description: Apply from editor
    scopes:
      - all
    command: sh
    args:
      - -c
      - >-
        nvim /tmp/k9s.yaml &&
        ([ -s /tmp/k9s.yaml ] && cat /tmp/k9s.yaml | kubectl --namespace $NAMESPACE --context $CONTEXT apply -f -) && rm /tmp/k9s.yaml ||
        exit 0
  clear-namespace:
    shortCut: Ctrl-L
    override: false
    overwriteOutput: false
    confirm: true
    dangerous: false
    description: Clear namespace
    scopes:
    - all
    command: sh
    background: true
    args:
    - -c
    - >-
      kubectl --context $CONTEXT
      delete --namespace $NAMESPACE all,configmaps,secrets,ingresses --all
  copy-ingress-hosts:
    shortCut: c
    override: true
    overwriteOutput: true
    confirm: false
    dangerous: false
    description: Copy ingress hosts
    scopes:
      - ingresses
    command: sh
    background: true
    args:
      - -c
      - >-
        kubectl --context $CONTEXT
        get ingress --namespace $NAMESPACE $NAME
        --output go-template='{{range .spec.rules}}{{.host}} {{end}}' | xsel --clipboard --input
        && printf "Successfully copied hosts"

