plugins:
  apply-manifest:
    shortCut: Shift-E
    confirm: false
    background: false
    description: Apply from editor
    scopes:
      - all
    command: sh
    args:
      - -c
      - >-
        nvim /tmp/k9s.yaml &&
        (test -s $_ && cat /tmp/k9s.yaml | kubectl --namespace $NAMESPACE --context $CONTEXT apply --filename -) &&
        rm /tmp/k9s.yaml || exit 0
  clear-namespace:
    shortCut: Ctrl-L
    override: false
    overwriteOutput: false
    confirm: true
    dangerous: false
    description: Clear namespace
    scopes:
      - pods
      - deployments
      - configmaps
      - secrets
      - ingresses
    command: sh
    background: true
    args:
      - -c
      - >-
        kubectl --namespace $NAMESPACE --context $CONTEXT
        delete all,configmaps,secrets,ingresses --all
  scale-reset:
    shortCut: Shift-S
    override: false
    overwriteOutput: false
    confirm: true
    dangerous: false
    description: Scale all pods to 0
    scopes:
      - deployments
      - replicasets
      - statefulsets
    command: sh
    background: true
    args:
      - -c
      - >-
        kubectl --namespace $NAMESPACE --context $CONTEXT
        scale statefulset,deployment --all --replicas=0
  scale-up:
    shortCut: u
    override: false
    overwriteOutput: false
    confirm: true
    dangerous: false
    description: Scale all pods to 1
    scopes:
      - deployments
      - replicasets
      - statefulsets
    command: sh
    background: true
    args:
      - -c
      - >-
        kubectl --namespace $NAMESPACE --context $CONTEXT
        scale statefulset,deployment --all --replicas=1
  copy-ingress-hosts:
    shortCut: c
    override: true
    overwriteOutput: true
    confirm: false
    dangerous: false
    description: Copy ingress hosts
    scopes:
      - ingresses
    command: sh
    background: true
    args:
      - -c
      - >-
        kubectl --namespace $NAMESPACE --context $CONTEXT
        get ingress $NAME --output go-template='{{range .spec.rules}}{{.host}} {{end}}' |
        xsel --clipboard --input && printf "Successfully copied hosts"
